# DatabasePJ-需求文档
#### 第一次迭代的定位

1.先考虑**单分支**、单链开发**无merge**的简单代码仓库。

2.存储增量信息

3.完成导入相关功能，但是不需要包装得易于使用，良好的交互性或者易用性可以等第二次迭代。

4.完成80%的查询功能雏形。

5.先不考虑代码仓库迭代的事情，比如今天导入以后，明天代码仓库新来了几个commit，我要如何应对。我们第一次迭代能够一口气导入所有，然后查看即可。

#### 最终迭代情况

1.可以处理多分支、有merge的情况。主要是借助了隔离性。设计的时候把每个branch隔离开来看。

2.存储增量信息

3.可以顺利导入纯Java项目（因为SonarQube没有开通高级版，所以不能扫别的语言，扫的过程中会出问题）

4.下面需求分析中涉及的功能均已经实现

5.仍然不支持代码仓库迭代的事情，比如今天导入以后，明天代码仓库新来了几个commit，然后只扫这些新的进来。



### 需求内容：

**静态缺陷有类的概念**：BUG，SMELL，VULN，SECHOT

##### 什么是静态缺陷的相关信息？包括类型、描述、文件、类、方法、起始行列，按 类型、文件和起始行列排序

#### ①最新版本（对应CommitService）

看最新版本的**累积情况**和**增量情况（引入和消除）**

最新版本中，静态缺陷数量的**分类统计**，以及相关信息列表 。

– 按类型统计 

– 详情按存续时长**排序** （应用层or SQL语句做）

– 按类型统计存续时长的平均值和中位值（应用层or SQL语句做）

#### ②指定版本（对应CommitService）

看这个版本的**累积情况**和**增量情况（引入和消除）**

和最新版本的需求差不多，要能够对这些进行分类查看，以及：

– 按类型统计 

– 详情按存续时长**排序** （应用层or SQL语句做）

– 按类型统计存续时长的平均值和中位值（应用层or SQL语句做）

#### ③指定一段时间内（对应TimeService）

看这段时间的**增量情况（引入和消除）**

一样是分类统计

个人观点：如果既在这段时间内引入，又在这段时间内消除，就都显示出来，没必要特殊处理。

#### ④指定人员（对应CommitterService）

给定开发人员，查看该人员引入缺陷、解决他人引入缺陷、自己引入且未解决缺陷、自己引入且被他人解决缺陷。该需要要求**既可以看总体也可以看具体某一类缺陷**的这些信息。

#### ⑤关于数据分析的一些细节

主要是一些统计信息

1.给定时间段后，可以显示：这段时间引入静态缺陷的**数量**，这些静态缺陷解决了多少，**解决率**，（已解决缺陷的）**平均解决时间**。该需要要求**既可以看总体也可以看具体某一类缺陷**的这些信息。

2.给定开发人员，查看该人员引入缺陷、解决他人引入缺陷、自己引入且未解决缺陷、自己引入且被他人解决缺陷，并显示这些缺陷的**存活周期统计**。





#### 附录：PPT上关于需求的部分

![需求1.png](https://s2.loli.net/2022/11/26/5LVHCUtnQfAIWKX.png)

![需求2.png](https://s2.loli.net/2022/11/26/fO385eXpyAwbiLI.png)

![需求3.png](https://s2.loli.net/2022/11/26/96HGMVrqFgsT548.png)
